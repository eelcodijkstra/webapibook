
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HTTP in Python &#8212; Het programmeerbare web</title>
    
  <link rel="stylesheet" href="_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="REST API’s" href="rest-apis.html" />
    <link rel="prev" title="Het HTTP protocol" href="http.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  <img src="_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Het programmeerbare web</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="inleiding.html">
   Inleiding
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="http.html">
   Het HTTP protocol
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   HTTP in Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="rest-apis.html">
   REST API’s
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="trello.html">
   Voorbeeld: Trello
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="matrix.html">
   Matrix instant messaging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tools.html">
   Tools
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/python-http.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/eelcodijkstra/webapibook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/eelcodijkstra/webapibook/issues/new?title=Issue%20on%20page%20%2Fpython-http.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/eelcodijkstra/webapibook/master?urlpath=tree/python-http.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#andere-requests-mogelijkheden">
   Andere requests-mogelijkheden
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#json">
   JSON
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#json-beperkingen">
     JSON beperkingen
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#voorbeeld-http-met-json">
   Voorbeeld HTTP met JSON
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#put-update">
     PUT: update
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#post-create">
     POST: create
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#delete-delete">
     Delete: delete
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#authenticatie-en-autorisatie">
   Authenticatie en autorisatie
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#openweathermap">
   openweathermap
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="http-in-python">
<h1>HTTP in Python<a class="headerlink" href="#http-in-python" title="Permalink to this headline">¶</a></h1>
<p>HTTP is een client-server protocol: de client, bijvoorbeeld de browser, stuurt een verzoek (<em>request</em>) naar de server,
die een antwoord (<em>response</em>) terug stuurt.
In ons geval is ons Python-programma (in dit notebook) de client.</p>
<p>Met behulp van de <code class="docutils literal notranslate"><span class="pre">requests</span></code> library (https://requests.readthedocs.io) kun je in Python HTTP-verzoeken sturen
en de antwoorden verwerken.
Dit is de basis voor het gebruik van web-API’s in Python.</p>
<p>Voordat we de library kunnen gebruiken moeten we deze importeren:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>
</pre></div>
</div>
</div>
</div>
<p>Het eenvoudigste HTTP-<em>request</em> is <code class="docutils literal notranslate"><span class="pre">get</span></code>, met een URL als parameter:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://ieni.org&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Aan de hand van de <code class="docutils literal notranslate"><span class="pre">status_code</span></code> kun je zien of de request geslaagd is, en een succesvolle response opgeleverd heeft.
De waarde <code class="docutils literal notranslate"><span class="pre">200</span></code> geeft succes aan; <code class="docutils literal notranslate"><span class="pre">404</span></code> is een niet-gevonden pagina; enz.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
</div>
</div>
<p>De <em>response</em> bevat onder meer de <em>headers</em> met metadata van de server.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">header</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>De <code class="docutils literal notranslate"><span class="pre">Content-type</span></code> header beschrijft het document-formaat van de response, in dit geval HTML:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>We geven hier alleen een klein gedeelte van het ontvangen HTML-document weer:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">500</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="andere-requests-mogelijkheden">
<h2>Andere requests-mogelijkheden<a class="headerlink" href="#andere-requests-mogelijkheden" title="Permalink to this headline">¶</a></h2>
<p>Met de <code class="docutils literal notranslate"><span class="pre">requests</span></code>-library kun je onder andere:</p>
<ul class="simple">
<li><p>verzoeken versturen met verschillende HTTP-methods: naast <code class="docutils literal notranslate"><span class="pre">GET</span></code> ook <code class="docutils literal notranslate"><span class="pre">POST</span></code>, <code class="docutils literal notranslate"><span class="pre">PUT</span></code>, <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>, enz.</p></li>
<li><p>authenticatie/autorisatiegegevens meegeven (username/password)</p></li>
<li><p>de headers die je opstuurt naar de server aanpassen</p></li>
<li><p>de parameters in de URL opgeven (<code class="docutils literal notranslate"><span class="pre">...?key1=value1&amp;key=value...</span></code>)</p></li>
<li><p>de payload (data) opgeven voor een <code class="docutils literal notranslate"><span class="pre">POST</span></code> of <code class="docutils literal notranslate"><span class="pre">PUT</span></code>-request</p></li>
</ul>
<p>Hieronder en in de andere notebooks kom je een aantal van deze mogelijkheden tegen.</p>
</div>
<div class="section" id="json">
<h2>JSON<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h2>
<p>Zoals uit dit voorbeeld mogelijk blijkt, is HTML niet het meest handige formaat om in een programma te verwerken.
De meeste web-API’s gebruiken daarom het JSON-formaat (JavaScript Object Notation, zie https://json.org).
JSON wordt veel gebruikt om “objecten” die je in programma’s gebruikt buiten het programma te bewaren,
bijvoorbeeld in een document-database (zoals MongoDB of CouchDB);
en om objecten te communiceren naar andere programma’s, zoals in web-API’s.</p>
<p>De JSON-notatie lijkt sterk op de Python Dictionary notatie.
Voor het omzetten van een Python Dictionary naar en van JSON gebruiken we de functies <code class="docutils literal notranslate"><span class="pre">dumps</span></code> en <code class="docutils literal notranslate"><span class="pre">loads</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span> <span class="pre">=</span> <span class="pre">json.dumps(object)</span></code> en <code class="docutils literal notranslate"><span class="pre">object</span> <span class="pre">=</span> <span class="pre">json.loads(string)</span></code>.</p>
<p>Voordat we deze functies kunnen gebruiken moeten we eerst de <code class="docutils literal notranslate"><span class="pre">json</span></code>-library importeren.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
</pre></div>
</div>
</div>
</div>
<p>In het voorbeeld hieronder maken we eerst een Python Dictionary aan:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mytodo</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Boodschappen supermarkt&quot;</span><span class="p">,</span> <span class="s2">&quot;done&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">mytodo</span> <span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">mytodo</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Via <code class="docutils literal notranslate"><span class="pre">json.dumps</span></code> zetten we dit om in een string (tekst).
Zo’n tekstformaat kun je zonder problemen communiceren of opslaan op een extern medium: je bent niet afhankelijk van een interne, binaire representatie.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mytodo_string</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">mytodo</span><span class="p">)</span>
<span class="n">mytodo_string</span>
</pre></div>
</div>
</div>
</div>
<p>Merk op dat deze string-representatie erg lijkt op de oorspronkelijke vorm.
Maar het is een gewone string, je kunt er geen velden in selecteren enz.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">mytodo_string</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Met de functie <code class="docutils literal notranslate"><span class="pre">json.loads</span></code> zet je deze JSON stringwaarde om in een Python dictionary:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">mytodo_string</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Ga na wat het type van het resultaat is van de vorige cel.</p></li>
<li><p>Ga na dat je in dit resultaat het veld “done” kunt selecteren.</p></li>
</ul>
<div class="section" id="json-beperkingen">
<h3>JSON beperkingen<a class="headerlink" href="#json-beperkingen" title="Permalink to this headline">¶</a></h3>
<p>JSON heeft maar een beperkt aantal basis-types: number, string, boolean.
Dit betekent dat je complexere basistypes zoals <em>datum</em> als string moet representeren.</p>
</div>
</div>
<div class="section" id="voorbeeld-http-met-json">
<h2>Voorbeeld HTTP met JSON<a class="headerlink" href="#voorbeeld-http-met-json" title="Permalink to this headline">¶</a></h2>
<p>In dit voorbeeld gebruiken we een eenvoudige ToDo-toepassing.
Voor deze demonstratie hebben we deze beschikbaar gemaakt op <code class="docutils literal notranslate"><span class="pre">glitch.com</span></code>:
https://shadowed-alder.glitch.me/ .
Je kunt de broncode bekijken via: https://glitch.com/edit/#!/shadowed-alder?path=server.js</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">todo_app</span> <span class="o">=</span> <span class="s2">&quot;https://shadowed-alder.glitch.me&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>Het volgende verzoek levert een JSON-document op met alle todo’s:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r1</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">todo_app</span> <span class="o">+</span> <span class="s2">&quot;/todos&quot;</span><span class="p">)</span>
<span class="n">r1</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
</div>
</div>
<p>Zoals je ziet is het resultaat (de payload) een text in JSON-formaat:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r1</span><span class="o">.</span><span class="n">text</span>
</pre></div>
</div>
</div>
</div>
<p>De requests-library heeft een ingebouwde JSON-decoder.
De functie <code class="docutils literal notranslate"><span class="pre">r1.json()</span></code> levert de Python-waarde (hier: list van dictionaries) als resultaat van de decodering.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r1</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>We kunnen de gegevens van een enkele todo opvragen, door de <code class="docutils literal notranslate"><span class="pre">id</span></code> hiervan in de URL op te nemen:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r2</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">todo_app</span> <span class="o">+</span> <span class="s2">&quot;/todos/2&quot;</span><span class="p">)</span>
<span class="n">r2</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mytodo</span> <span class="o">=</span> <span class="n">r2</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">mytodo</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="put-update">
<h3>PUT: update<a class="headerlink" href="#put-update" title="Permalink to this headline">¶</a></h3>
<p>Met een <code class="docutils literal notranslate"><span class="pre">PUT</span></code>-request kunnen we de toestand van deze todo veranderen, bijvoorbeeld <code class="docutils literal notranslate"><span class="pre">done</span></code> op 1 zetten.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mytodo</span><span class="p">[</span><span class="s1">&#39;done&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">r3</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">todo_app</span> <span class="o">+</span> <span class="s2">&quot;/todos/2&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">mytodo</span><span class="p">)</span>
<span class="n">r3</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r3</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="post-create">
<h3>POST: create<a class="headerlink" href="#post-create" title="Permalink to this headline">¶</a></h3>
<p>Een nieuwe todo kunnen we aanmaken met een <code class="docutils literal notranslate"><span class="pre">POST</span></code> naar URL voor de verzameling todo’s.
De <code class="docutils literal notranslate"><span class="pre">id</span></code> in het resultaat is de identificatie van de todo in de API.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">newtodo</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="s1">&#39;Huiswerk maken!&#39;</span><span class="p">,</span> <span class="s1">&#39;done&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">r4</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">todo_app</span> <span class="o">+</span> <span class="s2">&quot;/todos&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">newtodo</span><span class="p">)</span>
<span class="n">r4</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r4</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">todo_id</span> <span class="o">=</span> <span class="n">r4</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r5</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">todo_app</span> <span class="o">+</span> <span class="s2">&quot;/todos/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">todo_id</span>
     <span class="p">))</span>
<span class="n">r5</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r5</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="delete-delete">
<h3>Delete: delete<a class="headerlink" href="#delete-delete" title="Permalink to this headline">¶</a></h3>
<p>Met de <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> http-method kunnen we een todo ook weer verwijderen.
De gebruiken de <code class="docutils literal notranslate"><span class="pre">id</span></code> van de zojuist aangemaakte todo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r5</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">todo_app</span> <span class="o">+</span> <span class="s2">&quot;/todos/</span><span class="si">{id}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
       <span class="nb">id</span> <span class="o">=</span> <span class="n">todo_id</span>
     <span class="p">))</span>
<span class="n">r5</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">r5</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="authenticatie-en-autorisatie">
<h2>Authenticatie en autorisatie<a class="headerlink" href="#authenticatie-en-autorisatie" title="Permalink to this headline">¶</a></h2>
<p>Dit todo-voorbeeld is in één opzicht niet erg praktisch: iedereen kan deze lijst aanpassen.
In de praktijk zul je bij zo’n soort toepassing moeten inloggen, met een gebruikersnaam en wachtwoord.
Deze combinatie zorgt voor authenticatie: de server weet wie je bent, alleen jij kent deze combinatie (als het goed is ;-).
Impliciet zorgt dit ook voor autorisatie: je mag nu gebruik maken van de diensten die aan jouw naam gekoppeld zijn.</p>
<ul class="simple">
<li><p>authenticatie: ben jij wie je zegt dat je bent? Hoe kun je dat bewijzen?</p></li>
<li><p>autorisatie: heb jij hiervoor toestemming?</p></li>
</ul>
<p>Bij het gebruik van web-api’s gebruik je vaak een API-key of een token dat de rol van de gebruikersnaam/wachtwoord vervult.
Je kunt als aangemelde gebruiker vaak zo’n key aanmaken. Wees erop bedacht dat je deze net zo vertrouwelijk moet behandelen als je gebruikersnaam/wachtwoord-combinatie!</p>
</div>
<div class="section" id="openweathermap">
<h2>openweathermap<a class="headerlink" href="#openweathermap" title="Permalink to this headline">¶</a></h2>
<p>Via https://openweathermap.org kun je het actuele weer op een bepaalde lokatie ophalen.
Je moet daarvoor een gratis account aanmaken.
(Met een betaalde account krijg je meer mogelijkheden.)
De beschrijving van de API voor het huidige weer vind je via: https://openweathermap.org/current</p>
<p>In je account kun je een API-key aanmaken die je nodig hebt als authenticatie/autorisatie,
zie de tab API-keys (als je ingelogd bent).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">openweathermap_key</span> <span class="o">=</span> <span class="s1">&#39;vulhierjekeyin&#39;</span>
<span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.openweathermap.org/data/2.5/weather?q=</span><span class="si">{city}</span><span class="s1">,</span><span class="si">{country}</span><span class="s1">&amp;appid=</span><span class="si">{API_key}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">city</span> <span class="o">=</span> <span class="s2">&quot;Amsterdam&quot;</span><span class="p">,</span>
        <span class="n">country</span> <span class="o">=</span> <span class="s2">&quot;nl&quot;</span><span class="p">,</span>
        <span class="n">API_key</span> <span class="o">=</span> <span class="n">openweathermap_key</span>
      <span class="p">)</span>
<span class="n">rw</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">rw</span><span class="o">.</span><span class="n">status_code</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rw</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="http.html" title="previous page">Het HTTP protocol</a>
    <a class='right-next' id="next-link" href="rest-apis.html" title="next page">REST API’s</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Eelco Dijkstra<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>